{% extends "layout.html" %}
{% block content %}
<style>
  /* shared button style */
  .btn-orange {
    display:inline-block; padding:.75rem 1.4rem; background:#ff9d2d;
    color:#1a1a1a; font-weight:700; border-radius:8px; text-decoration:none;
    transition:background .3s;
  }
  .btn-orange:hover { background:#ffa94f; }

  /* table */
  .cart-table { width:90%; margin:2rem auto; border-collapse:collapse; }
  .cart-table th, .cart-table td {
    padding:.8rem 1rem; border-bottom:1px solid #333;
    text-align:center; color:#eee;
  }
  .cart-table th { background:#1a1a1a; color:#ffae36; }

  /* empty-cart block */
  .empty-cart {
    min-height:82.5vh; display:flex; flex-direction:column; align-items:center;
    justify-content:center; text-align:center; gap:1rem;
  }
  .empty-cart i { font-size:6rem; color:#ff9d2d; }
  .empty-cart p { font-size:1.25rem; color:#ccc; }

  .qty-bar     { display:inline-flex; align-items:center; gap:.4rem; }
.qty-btn     { background:#ff9d2d;border:none;color:#1a1a1a;
               width:30px;height:30px;font:700 1.2rem/1 sans-serif;
               border-radius:6px;cursor:pointer;transition:background .3s;}
.qty-btn:hover { background:#ffa94f; }
.qty-display { width:32px;text-align:center;font-size:1rem; }

</style>

{% if rows %}
  <h1 style="text-align:center;color:#ffae36;margin:1.5rem 0">Your Cart</h1>

  <table class="cart-table">
    <tr><th>Roll</th><th>Qty</th><th>Price (₹)</th><th>Subtotal (₹)</th></tr>
    {% for r in rows %}
    <tr>
      <td>{{ r.name }} ({{ r.size }})</td>
      <td>
        <form method="POST" action="{{ url_for('update_cart', item_id=r.id) }}"
                class="qty-bar">
            {{ csrf_token() if csrf_token is defined }}
            <button name="op" value="dec" class="qty-btn">−</button>
            <span class="qty-display">{{ r.qty }}</span>
            <button name="op" value="inc" class="qty-btn">+</button>
        </form>
        </td>

      <td>{{ r.price }}</td>
      <td>{{ r.subtotal }}</td>
    </tr>
    {% endfor %}
  </table>

  <p style="width:90%;margin:0 auto;text-align:right;font-size:1.3rem;color:#ffae36">
    Total: ₹{{ total }}
  </p>

  <form method="POST" action="{{ url_for('checkout') }}"
        style="width:90%;margin:2rem auto;text-align:right">
    <button type="submit" class="btn-orange">Checkout</button>
  </form>

{% else %}
  <!-- Empty-cart state -->
  <div class="empty-cart">
    <i class="fa-solid fa-cart-shopping"></i>
    <p>Your cart is empty</p>
    <a href="{{ url_for('menu') }}" class="btn-orange">Browse Menu</a>
  </div>
{% endif %}
{% endblock %}
